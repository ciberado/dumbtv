import Head from "next/head";
import Row from "../components/Row";
import Banner from "../components/Banner";
import Header from "../components/Header";

import HLSRow from "../components/HLSRow";

import getBingSourceEntries from "../lib/BingSource";
import getLifeTVSourceEntries from "../lib/LiveTVSource"

import getShowsEntries from "../lib/ShowSource";

export default function Home({
  bingEntries,
  liveTVEntries,
  trending,
  action,
  topRated,
  horror,
  comedy,
  romance,
  documentary,
}) {
  return (
    <div className="">
      <Head>
        <title>Netflix India - Watch TV Shows Online, Watch Movies Online</title>
        <link
          href="https://fonts.googleapis.com/css2?family=Inter"
          rel="stylesheet"
        />
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <Header />
      <Banner entries={ bingEntries } />

      <div className="">
        <HLSRow title="Live TV" entries={liveTVEntries} />
        <Row title="Trending" shows={trending} big={true} />
        <Row title="Top rated" shows={topRated} />
        <Row title="Action movies" shows={action} />
        <Row title="Documentaries" shows={documentary} />
        <Row title="Comedy" shows={comedy} />
      </div>
    </div>
  );
}

export async function getServerSideProps(context) {
  const [
    bingEntries,
    liveTVEntries,
    showEntries 
  ] = await Promise.all([
      getBingSourceEntries(),
      getLifeTVSourceEntries(),
      getShowsEntries()
  ]);


 return {
    props: {
      bingEntries,
      liveTVEntries,
      trending : showEntries.trending,
      action: showEntries.action,
      netflix : showEntries.netflix,
      topRated: showEntries.topRated,
      comedy : showEntries.comedy,
      documentary : showEntries.documentary
    },
  };
}